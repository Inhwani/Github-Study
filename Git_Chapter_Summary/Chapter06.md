# 6.1 새로운 작업

# 6.1.1 브랜치 작업

커밋은 파일의 수정 이력을 관리하는 데 사용한다면, 브랜치는 프로젝트를 독립적으로 관리하는 데 사용함.

# 6.1.2 깃 브랜치의 특징

### 가상 폴더

깃의 브랜치는 작업 폴더를 실제로 복사하지 않고, 가상 폴더로 생성함.

### 독립적인 공간

브랜치를 이용하면 원본 폴더와 분리하여 독립적으로 개발 작업을 수행할 수 있음.

### 빠른 동작

깃의 브랜치 기능은 다른 버전 관리 도구보다 가볍고, 브랜치 전환이 빠름

깃은 Blob 개념을 도입하여 내부를 구조화 함.

깃은 브랜치를 변경할 때 포인터를 이동하여 빠르게 전환함.

브랜치 명령을 사용하면 내부적으로 커밋을 하나 생성하여 브랜츠로 할당함.

# 6.2

# 6.3 브랜치 생성

브랜치는 가상의 작업 폴더임.

처음 깃을 초기화할 때 Working Directory는 master 브랜치를 생성.

브랜치를 생성하려면 기준이 되는 브랜치나 커밋이 있어야 하는데, 깃은 master 브랜치를 기준으로 새로운 브랜치를 생성함.

브랜치는 공통된 커밋을 가리키는 지점. 브랜치는 커밋처럼 SHA1 해시키를 가리킴

새 브랜치를 생성하면 포인터만 있는 브랜치가 생성됨.

# 6.3.1 브랜치 생성

처음 생성되는 기본 master 브랜치 외의 브랜치는 사용자가 직접 branch 명령어를

입력하여 생성해야 함. 브랜치는 깃에서 또 하나의 개발 분기점을 의미함.

```
$ git branch 브랜치이름 커밋ID
```

branch 명령어 뒤에 브랜치 이름을 인자 값으로 추가함.

브랜치 이름만 입력하면 현재 HEAD 포인터를 기준으로 새로운 브랜치를 생성.

# 6.3.2 브랜치 이름

브랜치 작성 규칙
- 기호로 시작할 수 없음
- 마침표로 시작할 수 없음
- 연속적인 마침표를 포함할 수 없음
- 빈칸, 공백문자 등등 포함 불가
- 아스키 제어 문자 불가.
- 중복 불가.

# 6.4 브랜치 확인

# 6.4.1 간단 브랜치 목록

```
$ git branch
```

깃 배시에서 브랜치 목록을 확인하는 방법.

생성된 전체 브랜치 목록을 출력함 

브랜츠 앞에 별표가 붙은 것을 확인 가능함 이는 현재 선택된 브랜치를 의미.

깃 배시에서는 O 마크가 붙어있음.

# 6.4.2 브랜치 해시

브랜치는 특정한 커밋의 해시 값(SHA1)을 의미합니다 rev-parse를 사용하여

현재 브랜치가 어떤 커밋 해시 값을 가리키는지 확인 가능

```
$ git rev-parse 브랜치이름
```

# 6.4.3 브랜치 세부 사항 확인

branch 명령어 뒤에 -v 또는 -verbose 옵션을 함께 사용하면 브랜치 이름

커밋 ID, 커밋 메시지를 같이 볼 수 있음.

# 6.5 브랜치 이동

# 6.5.1 브체크아웃

체크아웃은 현재 브랜치를 떠나 새로운 브랜치로 들어간다는 의미.

```
$ git checkout 브랜치이름
```

깃은 하나의 워킹 디렉토리만을 가지고 있음.

브랜치를 변경하여 워킹 디렉터리를 재설정 해야함.

# 6.5.2 브랜치 동작 원리

checkout 명령어로 브랜치가 변경되면 깃은 내부적으로 몇 가지 동작을 수행함
- 브랜치가 이동하면 HEAD 포인터도 이동함
- 브랜치를 변경하려면 기존 브랜치의 Working Directory를 정리해야 함.

# 6.5.3 소스트리

# 6.5.4 이전 브랜치

리눅스에서 대시(-) 기호는 이전 디렉터리를 의미함

```
$ git checkout -
```

# 6.5.5 Working Directory 정리

앞에 브랜치 이동시 Working Directory를 정리해야 한다고 했음.

Working Directory에서 작업하다가 커밋하지 않고

다른 브랜치로 체크아웃하면 브랜치 이동이 제한됨

깃은 충돌을 방지하기 위해 경고 메시지를 보여 주고 브랜치를 변경할 수 없게 제한함.

작업된 Working Directory를 커밋하지 않고 브랜치 변경 시 스태시 기능을 이용하면 좋음

# 6.6 브랜치 공간

브랜치에서 다른 브랜치로 이동하면 Working Directory 는 변경됨.

# 6.6.1 브랜치 로그

로그를 출력할 때 브랜치 흐름도 같이 보려면 --graph 옵션을 함께 사용함.

--graph --all 옵션을 사용하면 모든 로그를 출력함.

# 6.6.2 브랜치 소스 확인

브랜치를 이동하면 각자 브랜치의 마지막 워킹 디렉터리 상태로 변경됨.

# 6.7 HEAD 포인터

객체 포인터는 HEAD 입니다.

# 6.7.1 마지막 커밋.

깃음 마지막 커밋을 쉽게 확인할 수 있도록 특수한 포인터를 제공함.

HEAD는 작업 중인 브랜치읨 ㅏ지막 커밋 ID를 가리키는 참조 포인터

깃은 HEAD 포인터를 부모 커밋으로 대체하여 사용함.

# 6.7.2 브랜치 HEAD

브랜치를 이동하면 HEAD 포인트도 이동함. 브랜치가 여러 개면 HEAD 포인트도 여러 개임.

각각의 브랜치마다 마지막 커밋이 다르기 때문.

# 6.7.3 소스트리 HEAD

# 6.7.4 상대적 위치

깃의 HEAD 포인터는 내부적으로 커밋을 생성하고 브랜치를 관리하는 데 유용

깃의 다양한 명령어를 입력할 때도 기준점으로 사용함.

HEAD를 기준으로 상대적 커밋 위치도 지정 가능.

상대적 커밋 위치를 지정할 때는 캐럿(^)과 물결(~) 기호를 같이 사용.

# 6.7.5 AHEAD, BHEAD

HEAD 앞에 A 또는 B가 붙은 포인터도 있음.

원격 저장소와 로컬 저장소는 물리적으로 서로 다른 저장소임.

AHEAD BHEAD는 서로 다른 저장소 간 HEAD 포인터의 위치 차이를 의미함.

#### AHEAD

AHEAD는 서버로 전송되지 않은 로컬 커밋이 있는 것.

예를 들어 로컬 저장소에 새로운 커밋을 생성하고, 새로운 커밋 정보를 서버로 전송하지 않은 상황

이런 경우 AHEAD가 발생.

로컬 저장소의 HEAD 포인터를 기준으로 로컬 브랜치에 있는 커밋이 서버의 커밋 개수보다 많은 경우.

#### BHEAD

BHEAD는 로컬 저장소로 내려받지 않은 커밋이 있는 것.

# 6.8 생성과 이동

깃의 브랜치를 생성하는 동작과 이동하는 동작은 별개.

브랜치 생성은 branch 명령어를 사용하고, 브랜치 이동은 checkout 명령어를 사용해야 함.

브랜치를 생성하면서 동시에 생성된 브랜치로 이동하려면 별도의 명령어를 실행해야함.

# 6.8.1 자동 이동 옵션

깃은 브랜치 생성과 이동 명령을 한 번에 처리하는 옵션을 제공

체크아웃할 때 -b 옵션을 사용하면 브랜치 생성과 이동을 한 번에 할 수 있음.
